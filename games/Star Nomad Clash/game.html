<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Nomad Clash</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(to bottom, #0a0a2a, #1a1a4a);
            font-family: 'Courier New', monospace;
            overflow: hidden;
            color: #fff;
        }
        
        #game-container {
            position: relative;
            box-shadow: 0 0 20px rgba(0, 200, 255, 0.5);
            border: 2px solid #00aaff;
            border-radius: 4px;
        }
        
        canvas {
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1024" height="720"><rect width="1024" height="720" fill="%230a0a2a"/><circle cx="100" cy="100" r="2" fill="%23ffffff" opacity="0.8"/><circle cx="300" cy="50" r="1" fill="%23ffffff" opacity="0.6"/><circle cx="700" cy="200" r="1.5" fill="%23ffffff" opacity="0.7"/><circle cx="900" cy="80" r="1" fill="%23ffffff" opacity="0.5"/></svg>');
            display: block;
        }
        
        #ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 1024px;
            height: 720px;
            pointer-events: none;
        }
        
        #start-screen, #game-over-screen, #level-complete-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 1024px;
            height: 720px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 30, 0.85);
            text-align: center;
            pointer-events: auto;
        }
        
        #game-over-screen, #level-complete-screen {
            display: none;
        }
        
        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
        }
        
        h2 {
            font-size: 32px;
            margin-bottom: 20px;
            color: #ffcc00;
        }
        
        p {
            font-size: 20px;
            max-width: 800px;
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .btn {
            background: linear-gradient(to bottom, #ff3366, #cc0044);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            cursor: pointer;
            border-radius: 30px;
            box-shadow: 0 0 15px rgba(255, 50, 100, 0.7);
            transition: all 0.3s;
            pointer-events: auto;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 50, 100, 0.9);
        }
        
        #score-display, #lives-display, #level-display {
            position: absolute;
            top: 20px;
            font-size: 24px;
            color: #fff;
            text-shadow: 0 0 5px rgba(0, 200, 255, 0.8);
        }
        
        #score-display {
            left: 20px;
        }
        
        #lives-display {
            right: 20px;
        }
        
        #level-display {
            top: 60px;
            left: 20px;
        }
        
        #instructions {
            position: absolute;
            bottom: 20px;
            width: 1024px;
            text-align: center;
            font-size: 18px;
            color: #aaa;
        }
        
        .power-up-icon {
            display: inline-block;
            width: 30px;
            height: 30px;
            margin: 0 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas" width="1024" height="720"></canvas>
        
        <div id="ui-overlay">
            <div id="score-display">SCORE: 0</div>
            <div id="lives-display">LIVES: 3</div>
            <div id="level-display">LEVEL: 1</div>
            
            <div id="start-screen">
                <h1>STAR NOMAD CLASH</h1>
                <p>Defend your home planet from alien invaders!</p>
                <p>Destroy all aliens to advance to the next level.</p>
                <p>Collect stars for power-ups and rewards!</p>
                <div>
                    <p>CONTROLS:</p>
                    <p>← → : Move | SPACE : Shoot</p>
                </div>
                <button id="start-btn" class="btn">START MISSION</button>
            </div>
            
            <div id="game-over-screen">
                <h1>MISSION FAILED</h1>
                <p>Your ship has been destroyed!</p>
                <p>Final Score: <span id="final-score">0</span></p>
                <button id="restart-btn" class="btn">TRY AGAIN</button>
            </div>
            
            <div id="level-complete-screen">
                <h1>LEVEL COMPLETE!</h1>
                <p>You've defeated the alien invaders!</p>
                <p>Collect your reward: <span id="reward-stars">0</span> stars</p>
                <button id="next-level-btn" class="btn">NEXT LEVEL</button>
            </div>
            
            <div id="instructions">
                <p>← → : Move | SPACE : Shoot | ESC : Pause</p>
            </div>
        </div>
    </div>

    <script>
        // Game constants
        const CANVAS_WIDTH = 1024;
        const CANVAS_HEIGHT = 720;
        const PLAYER_SPEED = 8;
        const BULLET_SPEED = 10;
        const ALIEN_SPEED = 1;
        const ALIEN_DROP = 20;
        const ALIEN_ROWS = 5;
        const ALIEN_COLS = 10;
        const ALIEN_SPACING = 70;
        const PLAYER_Y = CANVAS_HEIGHT - 80;
        
        // Game state
        let gameState = {
            score: 0,
            lives: 3,
            level: 1,
            gameRunning: false,
            paused: false,
            player: null,
            aliens: [],
            bullets: [],
            explosions: [],
            powerUps: [],
            stars: [],
            keys: {},
            lastTime: 0,
            alienDirection: 1,
            alienMoveTimer: 0,
            alienShootTimer: 0
        };
        
        // DOM elements
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const levelCompleteScreen = document.getElementById('level-complete-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const nextLevelBtn = document.getElementById('next-level-btn');
        const scoreDisplay = document.getElementById('score-display');
        const livesDisplay = document.getElementById('lives-display');
        const levelDisplay = document.getElementById('level-display');
        const finalScore = document.getElementById('final-score');
        const rewardStars = document.getElementById('reward-stars');
        
        // Preloaded images
        const images = {};
        const imageNames = [
            '512x476_alien_health_bar.png',
            '386x410_alien_invader.png',
            '455x463_background_stars.png',
            '454x449_explosion.png',
            '238x310_laser_shot.png',
            '463x451_level_1_background.png',
            '289x329_level_2_background.png',
            '512x512_level_3_background.png',
            '469x404_level_4_background.png',
            '381x393_level_5_background.png',
            '443x365_player_ship.png',
            '512x512_power_up_double_shot.png',
            '357x393_power_up_shield.png',
            '307x264_power_up_slow_time.png',
            '494x477_star_icon.png',
            '433x433_tribe_korrak.png',
            '379x386_tribe_virex.png',
            '299x474_tribe_zorak.png',
            '512x487_warlord.png'
        ];
        
        // Initialize game
        function initGame() {
            gameState.score = 0;
            gameState.lives = 3;
            gameState.level = 1;
            gameState.gameRunning = true;
            gameState.paused = false;
            
            updateUI();
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            levelCompleteScreen.style.display = 'none';
            
            createPlayer();
            createAliens();
            gameState.alienDirection = 1;
            gameState.alienMoveTimer = 0;
            gameState.alienShootTimer = 0;
            
            // Start game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Create player ship
        function createPlayer() {
            gameState.player = {
                x: CANVAS_WIDTH / 2,
                y: PLAYER_Y,
                width: 60,
                height: 50,
                speed: PLAYER_SPEED,
                shootCooldown: 0,
                hasDoubleShot: false,
                hasShield: false
            };
        }
        
        // Create aliens
        function createAliens() {
            gameState.aliens = [];
            const startX = (CANVAS_WIDTH - (ALIEN_COLS * ALIEN_SPACING)) / 2;
            const startY = 50;
            
            for (let row = 0; row < ALIEN_ROWS; row++) {
                for (let col = 0; col < ALIEN_COLS; col++) {
                    gameState.aliens.push({
                        x: startX + col * ALIEN_SPACING,
                        y: startY + row * ALIEN_SPACING,
                        width: 50,
                        height: 40,
                        health: 1,
                        maxHealth: 1,
                        alive: true,
                        type: Math.floor(row / 2) % 3 // Different types for different rows
                    });
                }
            }
        }
        
        // Update UI elements
        function updateUI() {
            scoreDisplay.textContent = `SCORE: ${gameState.score}`;
            livesDisplay.textContent = `LIVES: ${gameState.lives}`;
            levelDisplay.textContent = `LEVEL: ${gameState.level}`;
        }
        
        // Create bullet
        function createBullet(x, y, isPlayerBullet) {
            gameState.bullets.push({
                x: x,
                y: y,
                width: 5,
                height: 15,
                speed: isPlayerBullet ? -BULLET_SPEED : BULLET_SPEED,
                isPlayerBullet: isPlayerBullet
            });
        }
        
        // Create explosion
        function createExplosion(x, y) {
            gameState.explosions.push({
                x: x,
                y: y,
                width: 40,
                height: 40,
                frame: 0,
                maxFrames: 8
            });
        }
        
        // Create power-up
        function createPowerUp(x, y) {
            const types = ['shield', 'doubleShot', 'slowTime'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            gameState.powerUps.push({
                x: x,
                y: y,
                width: 30,
                height: 30,
                speed: 2,
                type: type
            });
        }
        
        // Create star
        function createStar(x, y) {
            gameState.stars.push({
                x: x,
                y: y,
                width: 20,
                height: 20,
                speed: 1,
                collected: false
            });
        }
        
        // Handle keyboard input
        function handleKeyDown(e) {
            gameState.keys[e.key] = true;
            
            if (e.key === 'Escape') {
                gameState.paused = !gameState.paused;
            }
        }
        
        function handleKeyUp(e) {
            gameState.keys[e.key] = false;
        }
        
        // Game loop
        function gameLoop(timestamp) {
            if (!gameState.gameRunning) return;
            
            const deltaTime = timestamp - gameState.lastTime;
            gameState.lastTime = timestamp;
            
            if (gameState.paused) {
                requestAnimationFrame(gameLoop);
                return;
            }
            
            update();
            render();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Update game state
        function update() {
            // Handle player input
            if (gameState.keys['ArrowLeft'] && gameState.player.x > 0) {
                gameState.player.x -= gameState.player.speed;
            }
            if (gameState.keys['ArrowRight'] && gameState.player.x < CANVAS_WIDTH - gameState.player.width) {
                gameState.player.x += gameState.player.speed;
            }
            
            // Shooting
            if (gameState.keys[' '] && gameState.player.shootCooldown <= 0) {
                if (gameState.player.hasDoubleShot) {
                    createBullet(gameState.player.x, gameState.player.y, true);
                    createBullet(gameState.player.x + gameState.player.width - 10, gameState.player.y, true);
                } else {
                    createBullet(gameState.player.x + gameState.player.width / 2, gameState.player.y, true);
                }
                gameState.player.shootCooldown = 15;
            }
            
            if (gameState.player.shootCooldown > 0) {
                gameState.player.shootCooldown--;
            }
            
            // Update bullets
            for (let i = gameState.bullets.length - 1; i >= 0; i--) {
                const bullet = gameState.bullets[i];
                bullet.y += bullet.speed;
                
                // Remove bullets that go off screen
                if (bullet.y < 0 || bullet.y > CANVAS_HEIGHT) {
                    gameState.bullets.splice(i, 1);
                    continue;
                }
                
                // Check for collisions with aliens
                if (!bullet.isPlayerBullet) {
                    // Alien bullet hitting player
                    if (
                        bullet.x < gameState.player.x + gameState.player.width &&
                        bullet.x + bullet.width > gameState.player.x &&
                        bullet.y < gameState.player.y + gameState.player.height &&
                        bullet.y + bullet.height > gameState.player.y
                    ) {
                        if (gameState.player.hasShield) {
                            gameState.player.hasShield = false;
                        } else {
                            gameState.lives--;
                            createExplosion(gameState.player.x, gameState.player.y);
                            updateUI();
                            
                            if (gameState.lives <= 0) {
                                gameOver();
                                return;
                            }
                        }
                        gameState.bullets.splice(i, 1);
                    }
                } else {
                    // Player bullet hitting aliens
                    for (let j = 0; j < gameState.aliens.length; j++) {
                        const alien = gameState.aliens[j];
                        
                        if (!alien.alive) continue;
                        
                        if (
                            bullet.x < alien.x + alien.width &&
                            bullet.x + bullet.width > alien.x &&
                            bullet.y < alien.y + alien.height &&
                            bullet.y + bullet.height > alien.y
                        ) {
                            // Hit alien
                            alien.health--;
                            
                            if (alien.health <= 0) {
                                alien.alive = false;
                                gameState.score += 100 * gameState.level;
                                createExplosion(alien.x, alien.y);
                                
                                // Chance to drop power-up or star
                                if (Math.random() < 0.3) {
                                    if (Math.random() < 0.7) {
                                        createPowerUp(alien.x, alien.y);
                                    } else {
                                        createStar(alien.x, alien.y);
                                    }
                                }
                            }
                            
                            gameState.bullets.splice(i, 1);
                            updateUI();
                            break;
                        }
                    }
                }
            }
            
            // Update explosions
            for (let i = gameState.explosions.length - 1; i >= 0; i--) {
                const explosion = gameState.explosions[i];
                explosion.frame++;
                
                if (explosion.frame >= explosion.maxFrames) {
                    gameState.explosions.splice(i, 1);
                }
            }
            
            // Update power-ups
            for (let i = gameState.powerUps.length - 1; i >= 0; i--) {
                const powerUp = gameState.powerUps[i];
                powerUp.y += powerUp.speed;
                
                if (powerUp.y > CANVAS_HEIGHT) {
                    gameState.powerUps.splice(i, 1);
                    continue;
                }
                
                // Check collision with player
                if (
                    powerUp.x < gameState.player.x + gameState.player.width &&
                    powerUp.x + powerUp.width > gameState.player.x &&
                    powerUp.y < gameState.player.y + gameState.player.height &&
                    powerUp.y + powerUp.height > gameState.player.y
                ) {
                    // Apply power-up effect
                    if (powerUp.type === 'shield') {
                        gameState.player.hasShield = true;
                    } else if (powerUp.type === 'doubleShot') {
                        gameState.player.hasDoubleShot = true;
                    } else if (powerUp.type === 'slowTime') {
                        // Slow down aliens for 5 seconds
                        ALIEN_SPEED *= 0.5;
                        setTimeout(() => {
                            ALIEN_SPEED = 1; // Reset to normal speed
                        }, 5000);
                    }
                    
                    gameState.powerUps.splice(i, 1);
                }
            }
            
            // Update stars
            for (let i = gameState.stars.length - 1; i >= 0; i--) {
                const star = gameState.stars[i];
                star.y += star.speed;
                
                if (star.y > CANVAS_HEIGHT) {
                    gameState.stars.splice(i, 1);
                    continue;
                }
                
                // Check collision with player
                if (
                    star.x < gameState.player.x + gameState.player.width &&
                    star.x + star.width > gameState.player.x &&
                    star.y < gameState.player.y + gameState.player.height &&
                    star.y + star.height > gameState.player.y
                ) {
                    gameState.score += 500;
                    star.collected = true;
                    gameState.stars.splice(i, 1);
                    updateUI();
                }
            }
            
            // Move aliens
            gameState.alienMoveTimer++;
            
            if (gameState.alienMoveTimer > 30) {
                let shouldDrop = false;
                
                // Check if any alien is at the edge
                for (let i = 0; i < gameState.aliens.length; i++) {
                    const alien = gameState.aliens[i];
                    
                    if (!alien.alive) continue;
                    
                    if (
                        (gameState.alienDirection === 1 && alien.x + alien.width > CANVAS_WIDTH - 20) ||
                        (gameState.alienDirection === -1 && alien.x < 20)
                    ) {
                        shouldDrop = true;
                        break;
                    }
                }
                
                if (shouldDrop) {
                    gameState.alienDirection *= -1;
                    
                    // Move aliens down
                    for (let i = 0; i < gameState.aliens.length; i++) {
                        const alien = gameState.aliens[i];
                        
                        if (!alien.alive) continue;
                        
                        alien.y += ALIEN_DROP;
                        
                        // Check if aliens reached the bottom
                        if (alien.y + alien.height > PLAYER_Y - 20) {
                            gameOver();
                            return;
                        }
                    }
                } else {
                    // Move aliens horizontally
                    for (let i = 0; i < gameState.aliens.length; i++) {
                        const alien = gameState.aliens[i];
                        
                        if (!alien.alive) continue;
                        
                        alien.x += ALIEN_SPEED * gameState.alienDirection;
                    }
                }
                
                gameState.alienMoveTimer = 0;
            }
            
            // Alien shooting
            gameState.alienShootTimer++;
            
            if (gameState.alienShootTimer > 60) {
                // Find alive aliens to shoot from
                const aliveAliens = gameState.aliens.filter(alien => alien.alive);
                
                if (aliveAliens.length > 0) {
                    // Shoot from random alien
                    const shooter = aliveAliens[Math.floor(Math.random() * aliveAliens.length)];
                    createBullet(shooter.x + shooter.width / 2, shooter.y + shooter.height, false);
                }
                
                gameState.alienShootTimer = 0;
            }
            
            // Check if all aliens are defeated
            const allDead = gameState.aliens.every(alien => !alien.alive);
            
            if (allDead) {
                levelComplete();
            }
        }
        
        // Render game
        function render() {
            // Clear canvas
            ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
            
            // Draw background based on level
            drawBackground();
            
            // Draw player
            if (gameState.player) {
                ctx.fillStyle = gameState.player.hasShield ? '#00ffff' : '#00aaff';
                ctx.beginPath();
                ctx.moveTo(gameState.player.x, gameState.player.y + gameState.player.height);
                ctx.lineTo(gameState.player.x + gameState.player.width / 2, gameState.player.y);
                ctx.lineTo(gameState.player.x + gameState.player.width, gameState.player.y + gameState.player.height);
                ctx.closePath();
                ctx.fill();
                
                // Draw shield if active
                if (gameState.player.hasShield) {
                    ctx.strokeStyle = '#00ffff';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(
                        gameState.player.x + gameState.player.width / 2,
                        gameState.player.y + gameState.player.height / 2,
                        gameState.player.width / 2 + 5,
                        0,
                        Math.PI * 2
                    );
                    ctx.stroke();
                }
            }
            
            // Draw aliens
            for (let i = 0; i < gameState.aliens.length; i++) {
                const alien = gameState.aliens[i];
                
                if (!alien.alive) continue;
                
                // Draw alien body
                ctx.fillStyle = ['#ff3366', '#ff9900', '#33ccff'][alien.type % 3];
                ctx.beginPath();
                ctx.moveTo(alien.x, alien.y);
                ctx.lineTo(alien.x + alien.width, alien.y);
                ctx.lineTo(alien.x + alien.width - 10, alien.y + alien.height);
                ctx.lineTo(alien.x + 10, alien.y + alien.height);
                ctx.closePath();
                ctx.fill();
                
                // Draw alien eyes
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(alien.x + 15, alien.y + 15, 5, 0, Math.PI * 2);
                ctx.arc(alien.x + alien.width - 15, alien.y + 15, 5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(alien.x + 15, alien.y + 15, 2, 0, Math.PI * 2);
                ctx.arc(alien.x + alien.width - 15, alien.y + 15, 2, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw bullets
            for (let i = 0; i < gameState.bullets.length; i++) {
                const bullet = gameState.bullets[i];
                
                if (bullet.isPlayerBullet) {
                    ctx.fillStyle = '#00ffcc';
                } else {
                    ctx.fillStyle = '#ff3366';
                }
                
                ctx.beginPath();
                ctx.moveTo(bullet.x, bullet.y);
                ctx.lineTo(bullet.x + bullet.width, bullet.y + bullet.height);
                ctx.lineTo(bullet.x, bullet.y + bullet.height);
                ctx.closePath();
                ctx.fill();
            }
            
            // Draw explosions
            for (let i = 0; i < gameState.explosions.length; i++) {
                const explosion = gameState.explosions[i];
                
                ctx.fillStyle = `rgba(255, ${100 + Math.floor(Math.random() * 155)}, 0, ${1 - explosion.frame / explosion.maxFrames})`;
                ctx.beginPath();
                ctx.arc(explosion.x + explosion.width / 2, explosion.y + explosion.height / 2, 
                        explosion.width / 2 * (explosion.frame / explosion.maxFrames), 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw power-ups
            for (let i = 0; i < gameState.powerUps.length; i++) {
                const powerUp = gameState.powerUps[i];
                
                if (powerUp.type === 'shield') {
                    ctx.fillStyle = '#00ffff';
                    ctx.beginPath();
                    ctx.arc(powerUp.x + powerUp.width / 2, powerUp.y + powerUp.height / 2, 
                            powerUp.width / 2, 0, Math.PI * 2);
                    ctx.fill();
                } else if (powerUp.type === 'doubleShot') {
                    ctx.fillStyle = '#ff9900';
                    ctx.beginPath();
                    ctx.moveTo(powerUp.x, powerUp.y);
                    ctx.lineTo(powerUp.x + powerUp.width, powerUp.y);
                    ctx.lineTo(powerUp.x + powerUp.width / 2, powerUp.y + powerUp.height);
                    ctx.closePath();
                    ctx.fill();
                } else if (powerUp.type === 'slowTime') {
                    ctx.fillStyle = '#9900ff';
                    ctx.beginPath();
                    ctx.arc(powerUp.x + powerUp.width / 2, powerUp.y + powerUp.height / 2, 
                            powerUp.width / 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Draw stars
            for (let i = 0; i < gameState.stars.length; i++) {
                const star = gameState.stars[i];
                
                if (!star.collected) {
                    ctx.fillStyle = '#ffff00';
                    ctx.beginPath();
                    ctx.arc(star.x + star.width / 2, star.y + star.height / 2, 
                            star.width / 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }
        
        // Draw background based on level
        function drawBackground() {
            // Simple gradient for now - in a real game we'd load actual images
            const gradient = ctx.createLinearGradient(0, 0, 0, CANVAS_HEIGHT);
            gradient.addColorStop(0, '#0a0a2a');
            gradient.addColorStop(1, '#1a1a4a');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
            
            // Draw stars
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * CANVAS_WIDTH;
                const y = Math.random() * CANVAS_HEIGHT;
                const size = Math.random() * 2;
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Game over
        function gameOver() {
            gameState.gameRunning = false;
            finalScore.textContent = gameState.score;
            gameOverScreen.style.display = 'flex';
        }
        
        // Level complete
        function levelComplete() {
            gameState.gameRunning = false;
            rewardStars.textContent = Math.floor(Math.random() * 5) + 1;
            levelCompleteScreen.style.display = 'flex';
        }
        
        // Next level
        function nextLevel() {
            gameState.level++;
            gameState.player.hasDoubleShot = false;
            gameState.player.hasShield = false;
            
            if (gameState.level > 5) {
                // Victory - show final screen
                alert("Congratulations! You've defeated the alien warlord!");
                initGame();
                return;
            }
            
            createPlayer();
            createAliens();
            gameState.alienDirection = 1;
            gameState.alienMoveTimer = 0;
            gameState.alienShootTimer = 0;
            
            levelCompleteScreen.style.display = 'none';
            gameState.gameRunning = true;
            requestAnimationFrame(gameLoop);
        }
        
        // Event listeners
        startBtn.addEventListener('click', initGame);
        restartBtn.addEventListener('click', initGame);
        nextLevelBtn.addEventListener('click', nextLevel);
        
        window.addEventListener('keydown', handleKeyDown);
        window.addEventListener('keyup', handleKeyUp);
        
        // Initialize the game
        updateUI();
    </script>
</body>
</html>